<!DOCTYPE html>
<html>
<head>
    <!-- Google tag (gtag.js) -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-W8HW0NL52L"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-W8HW0NL52L');
    </script> -->
    <!-------------------------->

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Webpack App</title>
    <style>
        body {
            margin: 0;
            /*overflow: hidden;*/
            -webkit-font-smoothing: antialiased;
            -webkit-text-stroke: 1px transparent;
            text-rendering: optimizeLegibility;
        }

        body, html {
            height: 100%;
        }
    </style>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
<body>
    <!-- <script type="text/javascript" src="https://cas-stage.zma.gs/60da01be15ae551c007b057f/ssr/experiences/617eaea07c6ce01e2aa37320/init.js"></script> -->
    <script type="text/javascript" src="https://secure.api.viewer.zmags.com/viewer/viewer.js"></script>
<div id="myViewerContent" style="width: 800px; height: 600px;"></div>
<script>

    var viewer = new com.zmags.api.Viewer();
    viewer.setPublicationID("e8e1983d");
    // viewer.setPublicationID("84f1f879");
    viewer.setParentElementID("myViewerContent");
	// viewer.setFullscreenMode(com.zmags.api.Viewer.FullscreenMode.API_ONLY);
    viewer.addEventListener(com.zmags.api.Viewer.TOOLBAR_BUTTON_ACTIVATE, toolbarButtonActivateHandler);
    viewer.show();
	
	// This block of code displays the page specified in the URL.
    var pageturn = false; // Do not alter the hash while pages are still turning.
    // if(window.location.hash != ""){ viewer.gotoPage(window.location.hash.replace("#","")); }
    // window.onhashchange = function(event){ if(pageturn == false){ viewer.gotoPage(window.location.hash.replace("#","")); }}

    // This block of code updates the URL when pages are turned.
    viewer.oncurrentpageschange = function(event){
        console.log("CURRENT PAGES CHANGED", event);
        // viewer.getCurrentPages(function(data){
        //     // debugger;
        //     pageturn = true; // Pages currently turning.
        //     window.setTimeout(function(){ pageturn = false; }, 100);
        //     window.location.hash = data.firstPage;
        // });
    }
	
    var viewerStyle = "";
    function toolbarButtonActivateHandler(event){
        console.log("TOOLBAR ACTIVATED", event);
        // if (event.buttonID === "fullscreen"){
        //     var viewerDiv = document.getElementById("myViewerContent");
        //     if(viewerStyle == ""){
        //         document.body.style.overflow = "hidden";
        //         viewerStyle = viewerDiv.style.cssText;
        //         viewerDiv.style.cssText = "position:fixed; top:0px; left:0px; height:100%; width:100%; z-index:9001;";
        //     }
        //     else{
        //         document.body.style.overflow = "auto";
        //         viewerDiv.style.cssText = viewerStyle;
        //         viewerStyle = "";
        //     }

        //     viewer.resize();
        // }
    }

    viewer.ontoolbarbuttonactivate = function(event) {
        console.log("TOOLBAR ACTIVATED HOOK", event);
    }
	
	// function launchWebSiteProductWindow(productID){
	// 	window.__zmags.demandware.quickview.show({url:'/on/demandware.store/Sites-ethanallen-us-Site/en_US/Product-Show?format=ajax&pid='+productID+'&source=quickview', source: "quickview"});
	// }
    
    viewer.onproductlinkactivate = function(event){
        top?.postMessage("pub:productLink");
        // launchWebSiteProductWindow(event.product.product_id);
    }
    viewer.onproductwidgetactivate = function(event){
        top?.postMessage("pub:productWidget");
        console.log("PRODUCT WIDGET ACTIVATED", event);
        // launchWebSiteProductWindow(event.product.product_id);
    }
    viewer.onbuythelookwidgetactivate = function(event){
        top?.postMessage("pub:btl");
        console.log("BTL WIDGET ACTIVATED", event);
        // Replace line below with code to launch your web site's buy-the-look window
        // alert("buyTheLookWidgetActivateHandler, event products: " + event.products);
    }
    viewer.oncustomlinkactivate = function(event) {
        top?.postMessage("pub:customLink");
        console.log("CUSTOM LINK ACTIVATED", event);
    }

</script>
    <a href="/page2.html">Page 2!</a>

    <!-- <script type="text/javascript" src="https://cas-stage.zma.gs/60da01be15ae551c007b057f/ssr/experiences/64500f11e54c792e2747dbd1/init.js"></script> -->
</body>

</html>
